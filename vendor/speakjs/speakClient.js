var speakWorker;try{speakWorker=new Worker("vendor/speakjs/speakWorker.js")}catch(e){console.log("speak.js warning: no worker support")}function speak(e,o){var r=1;function n(e){var o,n=Date.now();!function(e){function o(o,r){for(var n=0,a=0;r;)n+=e[o]<<a,a+=8,o++,r--;return n}if(1!=o(20,2))throw"Invalid compression code, not PCM";if(1!=o(22,2))throw"Invalid number of channels, not 1";o(24,4),o(34,2),e.subarray(44)}(e);o=e,document.getElementById("audio").innerHTML='<audio id="player" src="data:audio/x-wav;base64,'+function(e){for(var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",n=0,a=0,s=0;s<e.length;s++)for(n=n<<8|e[s],a+=8;a>=6;){var t=n>>a-6&63;a-=6,r+=o[t]}return 2==a?(r+=o[(3&n)<<4],r+="=="):4==a&&(r+=o[(15&n)<<2],r+="="),r}(o)+'">',document.getElementById("player").play(),r&&console.log("speak.js: wav processing took "+(Date.now()-n).toFixed(2)+" ms")}if(o&&o.noWorker){var a=Date.now(),s=generateSpeech(e,o);r&&console.log("speak.js: processing took "+(Date.now()-a).toFixed(2)+" ms"),n(s)}else{a=Date.now();speakWorker.onmessage=function(e){r&&console.log("speak.js: worker processing took "+(Date.now()-a).toFixed(2)+" ms"),n(e.data)},speakWorker.postMessage({text:e,args:o})}}
